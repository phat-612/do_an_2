<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="icon" href="/img/static/icon.jpg">
  <title>{{title}}</title>
  <link rel="stylesheet" href="/css/styleAdmin.css">
  <link rel="stylesheet" href="/css/bootstrap.css">
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/css/bootstrap-icons.css">
  <link rel="stylesheet" href="/css/nouislider.css">
  <link rel="stylesheet" href="/css/dataTables.dataTables.css" />


  {{#if css}}
    <link rel="stylesheet" href="/css/{{css}}.css" />
  {{/if}}
  <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.1/axios.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
</head>

<body>
  <script src="/socket.io/socket.io.js"></script>
  <script>
    // Đảm bảo thư viện đã tải trước khi gọi io()
    const socket = io(); // Kết nối đến server
  </script>
  <header class="sticky-top z-2">
    {{>header-admin}}
  </header>
  <div class="admin-container">
    {{{body}}}
  </div>
  <script src="https://kit.fontawesome.com/3505ae4a94.js" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  {{!--
  <script src="/js/bootstrap.bundle.js"></script> --}}
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"></script>
  <script src="/js/bootstrap.js"></script>
  <script src="/js/nouislider.js"></script>
  <script src="/js/dataTables.dataTables.js"></script>


  {{!-- day la thong bao chung=================================================================================================== --}}
  <div id="notifyAdmin" class="toast align-items-center position-fixed top-0 end-0 p-3 z-3 bg-success" role="alert"
    aria-live="assertive" aria-atomic="true">
    <div class="d-flex">
      <div class="toast-body text-white textMessage"></div>
      <button type="button" class="btn-close me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
    </div>
  </div>
  {{!-- day la thong bao chung=================================================================================================== --}}
  <div id="liveToast" class="z-3 toast align-items-center position-fixed top-0 end-0 p-3
          {{statusToast message.type}}" role="alert" aria-live="assertive" aria-atomic="true">
    <div class="d-flex">
      <div class="toast-body text-white">
        {{message.message}}
      </div>
      <button type="button" class="btn-close me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
    </div>
  </div>
  {{#if message}}
    <script>
      $('document').ready(function () { $('#liveToast').toast('show'); })
    </script>
  {{/if}}
  {{!-- card scroll --}}
  {{#if js}}
    <script src="/js/{{js}}.js"></script>
  {{/if}}

  <script>
    const userSessionRole = "{{session.role}}";


    if (userSessionRole === 'admin') {
      const socket = io();

      socket.on("newOrder", (orderData) => {
        const toastElement = $('#notifyAdmin');
        toastElement.toast('show'); // Hiển thị toast thông báo
        $(".textMessage").text();
      });
    }
  </script>
</body>

</html>